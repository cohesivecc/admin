I"(function() {
  $(document).on('cohesive_admin.initialized', function(e) {
    $(document).off('change', 'select[data-polymorphic-type]').on('change', 'select[data-polymorphic-type]', function() {
      var field, id_input, initial_id, initial_type, model;
      field = $(this).data('polymorphic-type');
      initial_type = $(this).data('initial');
      id_input = $('select[data-polymorphic-key="' + field + '"]');
      id_input.html("<option value></option>").material_select();
      if (id_input.length && (model = CohesiveAdmin.config.managed_models[$(this).val()])) {
        initial_id = model.class_name === initial_type ? id_input.data('initial') : null;
        return $.ajax({
          type: 'get',
          url: model.uri,
          dataType: 'json',
          data: {
            page: 'all'
          },
          success: function(data) {
            var opts;
            opts = ["<option value></option>"];
            $.each(data, function(i, x) {
              var selected;
              selected = x.id === initial_id ? ' selected' : '';
              return opts.push('<option value="' + x.id + '" ' + selected + '>' + x.to_label + '</option>');
            });
            id_input.html(opts.join('')).material_select();
          },
          complete: function(request) {}
        });
      }
    });
    return $('select[data-polymorphic-type]').each(function() {
      if (!$(this).data('initialized')) {
        $(this).trigger('change');
        return $(this).data('initialized', true);
      }
    });
  });

}).call(this);
:ET